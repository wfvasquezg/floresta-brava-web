<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b2a2b" />
  <title>Men√∫ Digital | Floresta Brava</title>
  <meta name="description" content="Men√∫ digital de Floresta Brava. Almuerzos, desayunos, mariscos, carnes, pollos y bebidas. Pide por WhatsApp." />

  <style>
    :root{
      --bg:#f7f4ec;
      --ink:#0b2731;
      --muted:#5b646a;
      --card:#ffffff;
      --brand:#0b2a2b;
      --brand2:#155b4f;
      --gold:#d9a441;
      --shadow: 0 10px 30px rgba(0,0,0,.10);
      --shadow2: 0 6px 18px rgba(0,0,0,.10);
      --radius: 18px;
      --radius2: 14px;
      --line: rgba(0,0,0,.10);
      --ok:#22c55e;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(217,164,65,.18), transparent 60%),
        radial-gradient(1000px 500px at 95% 0%, rgba(21,91,79,.14), transparent 55%),
        var(--bg);
    }

    /* Top bar */
    .topbar{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(247,244,236,.75);
      border-bottom: 1px solid var(--line);
    }
    .topbar-inner{
      max-width:1100px;
      margin:0 auto;
      padding:12px 16px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:10px;
      align-items:center;
      min-width: 200px;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      box-shadow: var(--shadow2);
      display:grid;place-items:center;
      color:#fff;font-weight:800;
      letter-spacing:.5px;
      user-select:none;
      flex:0 0 auto;
    }
    .brand h1{
      margin:0;
      font-size:15px;
      line-height:1.1;
    }
    .brand small{
      display:block;
      margin-top:2px;
      color:var(--muted);
      font-weight:600;
      font-size:12px;
    }

    .search-wrap{
      flex:1;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
    }
    .search{
      width:100%;
      max-width:520px;
      position:relative;
    }
    .search input{
      width:100%;
      padding:12px 42px 12px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.90);
      outline:none;
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
      font-size:14px;
    }
    .search input:focus{
      border-color: rgba(21,91,79,.40);
      box-shadow: 0 4px 14px rgba(21,91,79,.18);
    }
    .search button{
      position:absolute;
      right:6px; top:50%;
      transform: translateY(-50%);
      width:34px; height:34px;
      border:0;
      border-radius:999px;
      cursor:pointer;
      background: rgba(11,42,43,.10);
      color:var(--brand);
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      min-width: 210px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      text-decoration:none;
      font-weight:700;
      font-size:13px;
      box-shadow: 0 3px 12px rgba(0,0,0,.08);
    }
    .btn-primary{
      border:0;
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      color:#fff;
    }
    .btn-ghost{
      background: rgba(255,255,255,.75);
    }

    /* Layout */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:18px 16px 90px;
    }

    /* Hero */
    .hero{
      margin-top:14px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(11,42,43,.95), rgba(21,91,79,.92));
      color:#fff;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-60px -60px auto auto;
      width:220px;height:220px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, rgba(217,164,65,.85), rgba(217,164,65,.0) 62%);
      filter: blur(2px);
      opacity:.95;
    }
    .hero-inner{
      padding:18px 18px 16px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:16px;
      align-items:center;
    }
    .hero h2{
      margin:0 0 6px;
      font-size:20px;
      letter-spacing:.2px;
    }
    .hero p{
      margin:0;
      color: rgba(255,255,255,.88);
      font-size:13.5px;
      line-height:1.45;
      max-width: 680px;
    }
    .hero-badges{
      margin-top:10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.18);
      font-size:12px;
      font-weight:700;
    }
    .badge strong{
      color:#fff;
    }
    .hero-cta{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }
    .hero-cta .btn{
      box-shadow:none;
    }
    .hero-cta .btn-primary{
      background: linear-gradient(135deg, #16a34a, #22c55e);
    }
    .hero-cta .btn-light{
      background: rgba(255,255,255,.92);
      color: var(--brand);
      border:0;
    }

    /* Quick nav chips */
    .chips{
      margin-top:14px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      color: var(--ink);
      font-weight:800;
      font-size:12.5px;
      text-decoration:none;
    }
    .chip:hover{ background:#fff; }
    .chip small{
      font-weight:800;
      color: var(--muted);
    }

    /* Featured */
    .featured{
      margin-top:16px;
    }
    .section-title{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      margin:18px 0 10px;
    }
    .section-title h3{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .section-title span{
      color:var(--muted);
      font-weight:700;
      font-size:12px;
    }
    .featured-grid{
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap:10px;
    }
    .feat{
      border-radius: 16px;
      background: rgba(255,255,255,.90);
      border: 1px solid var(--line);
      box-shadow: 0 6px 18px rgba(0,0,0,.07);
      overflow:hidden;
      text-decoration:none;
      color:var(--ink);
      display:flex;
      flex-direction:column;
      min-height: 170px;
    }
    .feat img{
      width:100%;
      height:100px;
      object-fit:cover;
      display:block;
      background:#eee;
    }
    .feat .feat-body{
      padding:10px 10px 12px;
      display:flex;
      flex-direction:column;
      gap:6px;
      flex:1;
    }
    .feat .name{
      font-weight:900;
      font-size:13px;
      line-height:1.2;
    }
    .feat .meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-top:auto;
    }
    .feat .price{
      font-weight:1000;
      color:var(--brand);
      background: rgba(217,164,65,.16);
      padding:4px 8px;
      border-radius:999px;
      border: 1px solid rgba(217,164,65,.30);
      font-size:12px;
    }
    .feat .tag{
      font-weight:800;
      color:var(--muted);
      font-size:11.5px;
    }

    /* Categories */
    .category{
      margin-top:18px;
      padding:14px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.82);
      border: 1px solid var(--line);
      box-shadow: 0 8px 22px rgba(0,0,0,.06);
    }
    .category-header{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .category-title{
      font-size:16px;
      font-weight:1000;
      letter-spacing:.2px;
      margin:0;
    }
    .category-tag{
      font-size:12px;
      font-weight:900;
      color:#fff;
      background: linear-gradient(135deg, rgba(11,42,43,.92), rgba(21,91,79,.90));
      padding:7px 10px;
      border-radius:999px;
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
      border: 1px solid rgba(255,255,255,.16);
    }
    .category-description{
      margin:0 0 12px;
      color:var(--muted);
      font-weight:650;
      font-size:13px;
      line-height:1.45;
    }

    .items{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .item{
      background: rgba(255,255,255,.95);
      border:1px solid var(--line);
      border-radius: var(--radius2);
      overflow:hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,.07);
      display:flex;
      flex-direction:column;
      min-height: 290px;
    }
/* IMAGEN DEL PLATO - UNIFORME Y PRO */

    .item-img{
      width: 100%;
      display: block;
      aspect-ratio: 4 / 3;  /* comida se ve mejor as√≠ en celular */
      height: auto;
      object-fit: cover;
      object-position: center;
    }
    @media (min-width: 900px){
      .item-img{ aspect-ratio: 3 / 2; }
    }    
    .no-img{
      width:100%;
      height:150px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg, rgba(11,42,43,.12), rgba(217,164,65,.10));
      color: rgba(11,42,43,.75);
      font-weight:900;
      font-size:12px;
      letter-spacing:.2px;
    }
    .item-body{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1;
    }
    .item-header-line{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
    }
    .item-name{
      font-weight:1000;
      font-size:14px;
      line-height:1.2;
    }
    .item-price{
      font-weight:1000;
      color: var(--brand);
      background: rgba(217,164,65,.18);
      border: 1px solid rgba(217,164,65,.30);
      padding:6px 10px;
      border-radius:999px;
      font-size:13px;
      white-space:nowrap;
      min-width: 68px;
      text-align:center;
    }
    .item-note{
      color:var(--muted);
      font-size:12.5px;
      font-weight:650;
      line-height:1.35;
      min-height: 32px;
    }
    .item-actions{
      margin-top:auto;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .mini{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border: 1px solid var(--line);
      background:#fff;
      color: var(--ink);
      text-decoration:none;
      font-weight:900;
      font-size:12px;
    }
    .mini.wa{
      border:0;
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color:#fff;
    }

    /* Floating WhatsApp */
    .wa-float{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 80;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-end;
    }
    .wa-float a{
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:999px;
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color:#fff;
      text-decoration:none;
      font-weight:1000;
      box-shadow: 0 14px 30px rgba(34,197,94,.22);
    }
    .wa-float .top{
      background: rgba(255,255,255,.92);
      color: var(--brand);
      border: 1px solid var(--line);
      box-shadow: 0 14px 30px rgba(0,0,0,.12);
      font-weight:1000;
    }

    /* Small helpers */
    .hide{ display:none !important; }
    .muted{ color: var(--muted); }
    .divider{ height:1px; background: var(--line); margin:12px 0; }

    /* Responsive */
    @media (max-width: 980px){
      .featured-grid{ grid-template-columns: repeat(3, 1fr); }
      .items{ grid-template-columns: repeat(2, 1fr); }
      .hero-inner{ grid-template-columns: 1fr; }
      .hero-cta{ justify-content:flex-start; }
      .actions{ min-width:auto; }
    }
    @media (max-width: 560px){
      .brand{ min-width:auto; }
      .search-wrap{ display:none; }
      .featured-grid{ grid-template-columns: repeat(2, 1fr); }
      .items{ grid-template-columns: 1fr; }
      .topbar-inner{ padding:10px 12px; }
      .wrap{ padding:14px 12px 90px; }
      .hero-inner{ padding:16px 14px 14px; }
      .category{ padding:12px; }
      .item{ min-height: 280px; }
    }

    /* ====== IMAGEN GRANDE EN CARD (RESPONSIVE) ====== */
    .dish-media{
      border-radius: 18px;
      overflow: hidden;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.06);
    }
    
    /* Relaci√≥n fija: 16:9 (ideal para 1280x720) */
    .dish-media img{
      width: 100%;
      aspect-ratio: 16 / 9;
      height: auto;             /* la controla aspect-ratio */
      display: block;
      object-fit: cover;        /* recorta un poco, pero se ve ‚Äúpro‚Äù */
      background: #111; /* o #f3f1ea */
      object-position: center;
    }
    
    /* En m√≥vil, evita que se vea demasiado alta */
    @media (max-width: 480px){
      .dish-media img{
        aspect-ratio: 4 / 3;    /* un poco m√°s ‚Äúplato‚Äù en vertical */
      }
    }
    
    /* Opcional: si NO quieres recorte nunca, usa contain (pero puede dejar bordes) */
    /*
    .dish-media img{
      object-fit: contain;
      background: #111;
    }
    */
    
  </style>
</head>

<body>
  <!-- TOPBAR -->
  <header class="topbar" id="top">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo">FB</div>
        <div>
          <h1>Floresta Brava</h1>
          <small>La excelencia del sabor</small>
        </div>
      </div>

      <div class="search-wrap">
        <div class="search">
          <input id="q" type="search" placeholder="Buscar: encebollado, ceviche, bol√≥n..." autocomplete="off" />
          <button id="clear" type="button" title="Limpiar b√∫squeda">‚úï</button>
        </div>
      </div>

      <div class="actions">
        <a class="btn btn-ghost" href="#almuerzos">Ver men√∫</a>
        <a class="btn btn-primary" id="waTop" href="#" target="_blank" rel="noopener">WhatsApp</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO / IMAN -->
    <section class="hero" aria-label="Promoci√≥n principal">
      <div class="hero-inner">
        <div>
          <h2>Men√∫ del d√≠a desde <span style="color:var(--gold)">$2,75</span></h2>
          <p>
            Saz√≥n casera, porciones generosas y atenci√≥n r√°pida.
            Pide por WhatsApp y te lo tenemos listo.
          </p>
          <div class="hero-badges">
            <div class="badge">‚ö° <strong>Listo en minutos</strong></div>
            <div class="badge">üçΩÔ∏è <strong>Porciones que llenan</strong></div>
            <div class="badge">üåä <strong>Sabor coste√±o y tradicional</strong></div>
          </div>
        </div>

        <div class="hero-cta">
          <a class="btn btn-primary" id="waHero" href="#" target="_blank" rel="noopener">Pedir por WhatsApp</a>
          <a class="btn btn-light" href="#destacados">Ver destacados</a>
          <a class="btn btn-light" href="#mariscos">Ir a mariscos</a>
        </div>
      </div>
    </section>

    <!-- QUICK NAV -->
    <nav class="chips" aria-label="Categor√≠as">
      <a class="chip" href="#almuerzos">Almuerzos <small>desde $2,75</small></a>
      <a class="chip" href="#desayunos">Desayunos</a>
      <a class="chip" href="#mariscos">Mariscos</a>
      <a class="chip" href="#carnes">Carnes</a>
      <a class="chip" href="#pollos">Pollos</a>
      <a class="chip" href="#gaseosas">Bebidas</a>
      <a class="chip" href="#pinchos">Pinchos</a>
    </nav>

    <!-- FEATURED -->
    <section class="featured" id="destacados" aria-label="Destacados">
      <div class="section-title">
        <h3>Destacados</h3>
        <span>Lo m√°s pedido</span>
      </div>
      <div class="featured-grid" id="featuredGrid"></div>
    </section>

    <!-- CATEGORIES (render din√°mico) -->
    <section class="category" id="almuerzos">
      <div class="category-header">
        <h3 class="category-title">Almuerzos</h3>
        <div class="category-tag">Men√∫ del d√≠a</div>
      </div>
      <p class="category-description">
        Opciones completas y econ√≥micas para todos los d√≠as.
      </p>
      <div class="items" data-category="Almuerzos"></div>
    </section>

    <section class="category" id="carnes">
      <div class="category-header">
        <h3 class="category-title">Carnes</h3>
        <div class="category-tag">Platos fuertes</div>
      </div>
      <p class="category-description">
        Cortes a la plancha o apanados, con acompa√±antes completos.
      </p>
      <div class="items" data-category="Carnes"></div>
    </section>

    <section class="category" id="desayunos">
      <div class="category-header">
        <h3 class="category-title">Desayunos</h3>
        <div class="category-tag">Desde las 08h00</div>
      </div>
      <p class="category-description">
        Desayunos t√≠picos para arrancar el d√≠a con energ√≠a.
      </p>
      <div class="items" data-category="Desayunos"></div>
    </section>

    <section class="category" id="mariscos">
      <div class="category-header">
        <h3 class="category-title">Mariscos</h3>
        <div class="category-tag">Sabores de la costa</div>
      </div>
      <p class="category-description">
        Ceviches, arroces y platos calientes con mariscos frescos.
      </p>
      <div class="items" data-category="Mariscos"></div>
    </section>

    <section class="category" id="pollos">
      <div class="category-header">
        <h3 class="category-title">Pollos</h3>
        <div class="category-tag">A la carta</div>
      </div>
      <p class="category-description">
        Platos de pollo bien sazonados y servidos con acompa√±antes.
      </p>
      <div class="items" data-category="Pollos"></div>
    </section>

    <section class="category" id="gaseosas">
      <div class="category-header">
        <h3 class="category-title">Bebidas</h3>
        <div class="category-tag">Fr√≠as</div>
      </div>
      <p class="category-description">
        Gaseosas y cervezas para acompa√±ar tu comida.
      </p>

      <div class="divider"></div>
      <div class="section-title" style="margin:0 0 10px;">
        <h3 style="margin:0;font-size:14px;">Gaseosa</h3>
        <span></span>
      </div>
      <div class="items" data-category="Gaseosa"></div>

      <div class="divider"></div>
      <div class="section-title" style="margin:0 0 10px;">
        <h3 style="margin:0;font-size:14px;">Cerveza</h3>
        <span></span>
      </div>
      <div class="items" data-category="Cerveza"></div>
    </section>

    <section class="category" id="pinchos">
      <div class="category-header">
        <h3 class="category-title">Pinchos</h3>
        <div class="category-tag">A la parrilla</div>
      </div>
      <p class="category-description">
        Ideales para acompa√±ar tu merienda.
      </p>
      <div class="items" data-category="Pinchos"></div>
    </section>

    <p class="muted" style="margin:16px 6px 0;font-weight:700;font-size:12px;">
      Nota: Las im√°genes se cargan desde la carpeta <strong>img/</strong>. Los platos sin archivo no muestran foto.
    </p>
  </main>

  <!-- Floating buttons -->
  <div class="wa-float" aria-label="Acciones r√°pidas">
    <a class="top" href="#top" title="Volver arriba">‚Üë Arriba</a>
    <a id="waFloat" href="#" target="_blank" rel="noopener" title="Pedir por WhatsApp">WhatsApp</a>
  </div>

  <script>
    /***********************
     * CONFIG PRODUCCION
     ***********************/
    // 1) Carpeta de im√°genes
    const IMG_BASE = "img/";

    // 2) N√∫mero WhatsApp (formato internacional sin +)
    const WHATSAPP_NUMBER = "593983603626";

    // 3) Texto base para WhatsApp
    const WHATSAPP_PREFIX = "Hola, vengo del men√∫ QR de Floresta Brava. ";

    // 4) Destacados (m√°ximo 6 recomendado)
    const FEATURED = [
      { category: "Mariscos", name: "Encebollado", tag: "Cl√°sico" },
      { category: "Mariscos", name: "Ceviche mixto", tag: "Top" },
      { category: "Mariscos", name: "Chaulaf√°n", tag: "R√°pido" },
      { category: "Carnes",  name: "Bisteck coste√±o", tag: "Fuerte" },
      { category: "Carnes",  name: "Carne apanada", tag: "Crocante" },
      { category: "Desayunos", name: "Tigrillo", tag: "Desayuno" },
    ];

    /***********************
     * DATA MENU (EXCEL)
     * Si file = "" => sin imagen
     * Si price = null => sin precio (por ejemplo, a√∫n por definir)
     ***********************/
    const MENU = [
      {
        id: "almuerzos",
        title: "Almuerzos",
        desc: "Opciones completas y econ√≥micas para todos los d√≠as.",
        items: [
          { name: "Almuerzos", price: 2.75, file: "" },
          { name: "Almuerzos con encebollado", price: 3.50, file: "" },
          { name: "Meriendas", price: 2.75, file: "" },
          { name: "Meriendas con pincho", price: 3.50, file: "" },
          { name: "Segundo del d√≠a", price: 2.25, file: "" },
          { name: "Sopa del d√≠a", price: 1.50, file: "" },
        ],
      },
      {
        id: "carnes",
        title: "Carnes",
        desc: "Cortes preparados a la plancha o apanados, con guarniciones completas.",
        items: [
          { name: "Bisteck coste√±o", price: 5.25, file: "bisteckcosteno.png" },
          { name: "Carne apanada", price: 5.25, file: "carneapanada.png" },
          { name: "Chuleta", price: 6.00, file: "chuleta.png" },
          { name: "Churrasco", price: 5.25, file: "churrasco.png" },
          { name: "Lomo a la pimienta", price: 5.25, file: "lomoalapimienta.png" },
          { name: "Lomo a la plancha", price: 5.25, file: "lomolaplancha.png" },
          { name: "Menestras", price: 5.25, file: "menestradecarne.png" },
          { name: "Yaguarlocro", price: null, file: "yaguarlocro.png" },
        ],
      },
      {
        id: "desayunos",
        title: "Desayunos",
        desc: "Desayunos t√≠picos ecuatorianos para arrancar el d√≠a con energ√≠a.",
        items: [
          { name: "Bolones", price: 1.00, file: "bolon-estofado.png" },
          { name: "Corviches", price: 1.00, file: "corviches.png" },
          { name: "Desayuno completo", price: 3.75, file: "" },
          { name: "Desayuno continental", price: 2.75, file: "desayunocontinental.png" },
          { name: "Empanadas", price: 1.00, file: "empanadas.png" },
          { name: "Muchines", price: 1.00, file: "muchin.png" },
          { name: "Tamales", price: 1.00, file: "tamal.png" },
          { name: "Tigrillo", price: 4.00, file: "tigrillo.png" },
        ],
      },
      {
        id: "mariscos",
        title: "Mariscos",
        desc: "Ceviches, arroces y platos calientes preparados con mariscos frescos.",
        items: [
          { name: "Arroz con camar√≥n", price: 8.50, file: "arrozconcamaron.webp" },
          { name: "Arroz con concha", price: 8.50, file: "arrozconconcha.webp" },
          { name: "Arroz mixto", price: 10.00, file: "arrozmixto.png" },
          { name: "Bandera", price: 10.00, file: "bandera.png" },
          { name: "Bochinche", price: 10.00, file: "bochinche.png" },
          { name: "Camarones al ajillo", price: 8.50, file: "camaronesalajillo.png" },
          { name: "Camarones apanados", price: 8.50, file: "camaronesapanados.png" },
          { name: "Cazuelas", price: 8.50, file: "cazueladecamaron.png" },
          { name: "Ceviche de camar√≥n", price: 8.50, file: "cevichedecamaron.png" },
          { name: "Ceviche de concha", price: 8.50, file: "cevichedeconcha.png" },
          { name: "Ceviche de pescado", price: 8.00, file: "cevichedepescado.png" },
          { name: "Ceviche mixto", price: 8.50, file: "cevichemixto.png" },
          { name: "Cevich√≥n", price: 4.50, file: "cevichon.png" },
          { name: "Chaulaf√°n", price: 3.75, file: "chaulafan.png" },
          { name: "Chupe de pescado", price: 3.75, file: "chupedepescado.png" },
          { name: "Corvinas", price: 8.50, file: "corvina.png" },
          { name: "Encebollado", price: 3.00, file: "encebollado.png" },
          { name: "Encebollado mixto", price: 8.50, file: "encebolladomixto.png" },
          { name: "Guatita", price: 3.00, file: "guatita.png" },
          { name: "Langostinos a la brava", price: 10.00, file: "langostinosalabrava.png" },
          { name: "Sopa de camar√≥n", price: 8.50, file: "sopadecamaron.png" },
        ],
      },
      {
        id: "pollos",
        title: "Pollos",
        desc: "Platos de pollo jugosos y bien sazonados, con acompa√±antes.",
        items: [
          { name: "Arroz con pollo", price: 3.75, file: "arrozconpollo.png" },
          { name: "Pechuga a la plancha", price: 5.25, file: "pechugaalaplancha.png" },
          { name: "Pechuga apanada", price: 5.25, file: "pechugaapanada.png" },
          { name: "Seco de pollo", price: 4.00, file: "secodepollo.png" },
        ],
      },
      {
        id: "gaseosas",
        title: "Gaseosa",
        desc: "Opciones individuales y familiares.",
        items: [
          { name: "Mediana", price: 1.00, file: "" },
          { name: "Personal", price: 0.65, file: "" },
          { name: "1.35 ml", price: 2.25, file: "" },
        ],
      },
      {
        id: "cerveza",
        title: "Cerveza",
        desc: "Cervezas nacionales.",
        items: [
          { name: "Pilsener 600 ml", price: 2.25, file: "" },
          { name: "Club 550 ml", price: 2.50, file: "" },
        ],
      },
      {
        id: "pinchos",
        title: "Pinchos",
        desc: "Ideales para acompa√±ar tu merienda.",
        items: [
          { name: "Pincho de carne", price: null, file: "pinchodecarne.png" },
          { name: "Pincho de pollo", price: null, file: "pinchodepollo.png" },
        ],
      },
    ];

    /***********************
     * HELPERS
     ***********************/
    function formatPrice(p) {
      if (p === null || p === undefined || p === "") return "";
      return "$" + Number(p).toFixed(2).replace(".", ",");
    }

    function waLink(message) {
      const base = "https://wa.me/" + WHATSAPP_NUMBER;
      return base + "?text=" + encodeURIComponent(message);
    }

    function waForItem(itemName, priceText) {
      const msg = WHATSAPP_PREFIX + "Quiero pedir: " + itemName + (priceText ? " (" + priceText + ")" : "") + ".";
      return waLink(msg);
    }

    function findItem(categoryTitle, itemName) {
      const cat = MENU.find(c => c.title.toLowerCase() === categoryTitle.toLowerCase());
      if (!cat) return null;
      return cat.items.find(i => i.name.toLowerCase() === itemName.toLowerCase()) || null;
    }

    function itemHTML(it) {
      const priceText = it.price != null ? formatPrice(it.price) : "";
      const imgBlock = it.file
        ? `<img src="${IMG_BASE + it.file}" alt="${it.name}" class="item-img" loading="lazy" onerror="this.outerHTML='<div class=&quot;no-img&quot;>Sin foto</div>'">`
        : `<div class="no-img">Sin foto</div>`;

      const note = it.price == null
        ? "Consultar precio"
        : "P√≠delo por WhatsApp";

      return `
        <article class="item" data-name="${it.name.toLowerCase()}">
          ${imgBlock}
          <div class="item-body">
            <div class="item-header-line">
              <div class="item-name">${it.name}</div>
              <div class="item-price">${priceText || "‚Äî"}</div>
            </div>
            <div class="item-note">${note}</div>
            <div class="item-actions">
              <a class="mini wa" href="${waForItem(it.name, priceText)}" target="_blank" rel="noopener">Pedir este</a>
              <a class="mini" href="#top">Inicio</a>
            </div>
          </div>
        </article>
      `;
    }

    function renderCategory(categoryTitle, container) {
      const cat = MENU.find(c => c.title === categoryTitle);
      if (!cat) return;
      container.innerHTML = cat.items.map(itemHTML).join("");
    }

    function renderAll() {
      document.querySelectorAll(".items[data-category]").forEach(el => {
        const catName = el.getAttribute("data-category");
        renderCategory(catName, el);
      });
    }

    function renderFeatured() {
      const grid = document.getElementById("featuredGrid");
      if (!grid) return;

      const cards = FEATURED.map(f => {
        const it = findItem(f.category, f.name);
        if (!it) return "";
        const priceText = it.price != null ? formatPrice(it.price) : "";
        const img = it.file
          ? `<img src="${IMG_BASE + it.file}" alt="${it.name}" loading="lazy" onerror="this.outerHTML='<div class=&quot;no-img&quot; style=&quot;height:100px;border-radius:0&quot;>Sin foto</div>'">`
          : `<div class="no-img" style="height:100px;border-radius:0">Sin foto</div>`;

        const href = waForItem(it.name, priceText);
        return `
          <a class="feat" href="${href}" target="_blank" rel="noopener" title="Pedir ${it.name}">
            ${img}
            <div class="feat-body">
              <div class="name">${it.name}</div>
              <div class="meta">
                <div class="tag">${f.tag}</div>
                <div class="price">${priceText || "Consultar"}</div>
              </div>
            </div>
          </a>
        `;
      }).join("");

      grid.innerHTML = cards;
    }

    function setupWhatsAppButtons() {
      const generalMsg = WHATSAPP_PREFIX + "Quiero hacer un pedido. ¬øMe ayudas por favor?";
      const href = waLink(generalMsg);

      const ids = ["waTop", "waHero", "waFloat"];
      ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.href = href;
      });
    }

    function setupSearch() {
      const q = document.getElementById("q");
      const clear = document.getElementById("clear");

      function applyFilter() {
        const term = (q.value || "").trim().toLowerCase();
        const allItems = document.querySelectorAll(".item");
        allItems.forEach(card => {
          const name = card.getAttribute("data-name") || "";
          if (!term || name.includes(term)) card.classList.remove("hide");
          else card.classList.add("hide");
        });

        // Si no hay resultados en una categor√≠a, ocultar el bloque de categor√≠a (solo visual)
        document.querySelectorAll(".category").forEach(cat => {
          const visible = cat.querySelectorAll(".item:not(.hide)").length;
          if (term && visible === 0) cat.classList.add("hide");
          else cat.classList.remove("hide");
        });

        // Mantener visibles hero y destacados
        const hero = document.querySelector(".hero");
        const featured = document.getElementById("destacados");
        if (hero) hero.classList.remove("hide");
        if (featured) featured.classList.remove("hide");
      }

      q.addEventListener("input", applyFilter);
      clear.addEventListener("click", () => {
        q.value = "";
        applyFilter();
        q.focus();
      });
    }

    /***********************
     * INIT
     ***********************/
    renderAll();
    renderFeatured();
    setupWhatsAppButtons();
    setupSearch();
  </script>
</body>
</html>


