<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="#0b2a2b" name="theme-color"/>
  <title>Menú Digital | Floresta Brava</title>
  <meta content="Menú digital de Floresta Brava. Almuerzos, desayunos, mariscos, carnes, pollos y bebidas. Pide por WhatsApp." name="description"/>
  <link href="https://www.florestabrava.com/menudigital.html" rel="canonical"/>

  <!-- Open Graph / redes sociales -->
  <meta content="website" property="og:type"/>
  <meta content="Menú Digital | Floresta Brava" property="og:title"/>
  <meta content="Menú digital de Floresta Brava. Pide por WhatsApp." property="og:description"/>
  <meta content="https://www.florestabrava.com/menudigital.html" property="og:url"/>
  <meta content="https://www.florestabrava.com/img/hero-encebollado-1600.webp" property="og:image"/>
  <meta content="summary_large_image" name="twitter:card"/>

  <!-- Datos estructurados para SEO local -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Restaurant",
    "name": "Floresta Brava",
    "url": "https://www.florestabrava.com/",
    "hasMenu": "https://www.florestabrava.com/menudigital.html",
    "sameAs": ["https://g.page/r/CWs8Hr-H1g4jEBM"],
    "telephone": "+593983603626",
    "servesCuisine": ["Comida ecuatoriana", "Comida típica", "Desayunos", "Almuerzos"],
    "priceRange": "$$",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Av. Coruña y Guipúzcoa",
      "addressLocality": "Quito",
      "addressRegion": "Pichincha",
      "addressCountry": "EC"
    }
  }
  </script>

  <!-- Preload logo -->
  <link as="image" fetchpriority="high" href="img/letrasflorestabrava.png" rel="preload"/>


  <style>
    :root{
      /* Header tokens */
      --topbar-h: 68px;

      /* Colores base (mismo lenguaje visual que index.html) */
      --madera:#7a4b1f;
      --madera-oscura:#4b2a12;
      --turquesa:#1fb6c9;
      --naranja:#f57c22;
      --crema:#fff7e8;
      --gris:#444;
      --verde:#145b6b;
      --verde-oscuro:#0b2731;
      --amarillo:var(--naranja);

      /* Tokens del menú */
      --bg:#f5f3ee;
      --ink:var(--verde-oscuro);
      --muted:#5b646a;
      --card:#ffffff;
      --brand:var(--verde-oscuro);
      --brand2:var(--verde);
      --gold:var(--naranja);
      --shadow: 0 10px 30px rgba(0,0,0,0.10);
      --shadow2: 0 6px 18px rgba(0,0,0,0.10);
      --radius: 18px;
      --radius2: 14px;
      --line: rgba(0,0,0,0.10);
      --ok:#22c55e;
      --warn:#f59e0b;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    /* Evita que anclas queden tapadas por el header fijo */
    html{ scroll-padding-top: calc(var(--topbar-h) + env(safe-area-inset-top) + 10px); }

    body{
      /* Compensa el header fijo + notch */
      padding-top: calc(var(--topbar-h) + env(safe-area-inset-top));
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(245,124,34,0.18), transparent 60%),
        radial-gradient(1000px 500px at 95% 0%, rgba(20,91,107,0.14), transparent 55%),
        var(--bg);
    }

    .skip-link{
      position:absolute;
      left:-999px;
      top:8px;
      background:#fff;
      color:#000;
      padding:10px 14px;
      border-radius:10px;
      z-index:99999;
      box-shadow: 0 6px 18px rgba(0,0,0,0.20);
    }
    .skip-link:focus{ left:12px; }

    /* Top bar (FIJO ROBUSTO) */
    .topbar{
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 9999;
      background: linear-gradient(90deg, var(--madera-oscura), var(--verde));
      box-shadow: 0 10px 24px rgba(0,0,0,0.18);
      padding-top: env(safe-area-inset-top);
    }
    .topbar-inner{
      max-width:1120px;
      margin:0 auto;
      padding: 0 16px;
      height: var(--topbar-h);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }


    .brand{
      display:flex;
      gap:10px;
      align-items:center;
      min-width: 200px;
    }

    .logo{
      width:42px;height:42px;border-radius:14px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 8px 18px rgba(0,0,0,0.12);
      display:grid;place-items:center;
      user-select:none;
      flex:0 0 auto;
      overflow:hidden;
    }
    .logo img{ width:100%; height:100%; object-fit:contain; display:block; }

    .brand h1{margin:0;font-size:15px;line-height:1.1;color:#fff;}
    .brand small{display:block;margin-top:2px;color:rgba(255,255,255,0.85);font-weight:600;font-size:12px;}

    .search-wrap{
      flex:1;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
    }
    .search{
      width:100%;
      max-width:520px;
      position:relative;
    }
    .search input{
      width:100%;
      padding:12px 42px 12px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.28);
      background: rgba(255,255,255,0.92);
      outline:none;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06);
      font-size:14px;
    }
    .search input:focus{
      border-color: rgba(21,91,79,.40);
      box-shadow: 0 4px 14px rgba(21,91,79,.18);
    }
    .search button{
      position:absolute;
      right:6px; top:50%;
      transform: translateY(-50%);
      width:34px; height:34px;
      border:0;
      border-radius:999px;
      cursor:pointer;
      background: rgba(11,39,49,0.10);
      color: var(--verde-oscuro);
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      min-width: 210px;
    }
    .btn{
      transition: transform .1s ease, box-shadow .15s ease, background .15s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.10);
      color:#fff;
      text-decoration:none;
      font-weight:800;
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.12);
      cursor:pointer;
    }
    .btn-primary{
      border:0;
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color:#fff;
      box-shadow: 0 14px 30px rgba(34,197,94,0.22);
    }
    .btn-ghost{ background: rgba(255,255,255,.75); }

    /* Layout */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:18px 16px 120px;
    }

    /* Hero */
    .hero{
      margin-top:14px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(11,42,43,.95), rgba(21,91,79,.92));
      color:#fff;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      scroll-margin-top: calc(var(--topbar-h) + env(safe-area-inset-top) + 18px);
    }
    .hero::before{
      content:"";
      position:absolute; inset:-60px -60px auto auto;
      width:220px;height:220px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, rgba(217,164,65,.85), rgba(217,164,65,.0) 62%);
      filter: blur(2px);
      opacity:.95;
    }
    .hero-inner{
      padding:18px 18px 16px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:16px;
      align-items:center;
    }
    .hero h2{ margin:0 0 6px; font-size:20px; letter-spacing:.2px; }
    .hero p{
      margin:0;
      color: rgba(255,255,255,.88);
      font-size:13.5px;
      line-height:1.45;
      max-width: 680px;
    }
    .hero-badges{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.18);
      font-size:12px;
      font-weight:700;
    }
    .badge strong{ color:#fff; }
    .hero-cta{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }
    .hero-cta .btn{ box-shadow:none; }
    .hero-cta .btn-primary{ background: linear-gradient(135deg, #16a34a, #22c55e); }
    .hero-cta .btn-light{
      background: rgba(255,255,255,.92);
      color: var(--brand);
      border:0;
    }

    /* Quick nav chips */
    .chips{ margin-top:14px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      color: var(--ink);
      font-weight:800;
      font-size:12.5px;
      text-decoration:none;
    }
    .chip:hover{ background:#fff; }
    .chip small{ font-weight:800; color: var(--muted); }

    /* Featured */
    .featured{ margin-top:16px; scroll-margin-top: calc(var(--topbar-h) + env(safe-area-inset-top) + 18px); }
    .section-title{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      margin:18px 0 10px;
    }
    .section-title h3{ margin:0; font-size:16px; letter-spacing:.2px; }
    .section-title span{ color:var(--muted); font-weight:700; font-size:12px; }

    .featured-grid{
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap:10px;
    }
    .feat{
      border-radius: 16px;
      background: rgba(255,255,255,.90);
      border: 1px solid var(--line);
      box-shadow: 0 6px 18px rgba(0,0,0,.07);
      overflow:hidden;
      text-decoration:none;
      color:var(--ink);
      display:flex;
      flex-direction:column;
      min-height: 170px;
    }
    .feat img{
      width:100%;
      height:100px;
      object-fit:cover;
      display:block;
      background:#eee;
    }

    /* Precio como badge sobre la imagen en Destacados */
    .feat .feat-media{ position: relative; }
    .feat .feat-price-badge{
      position: absolute;
      right: 10px;
      bottom: 10px;
      z-index: 2;

      font-weight: 1000;
      color: var(--brand);
      background: rgba(255,247,232,.95);
      border: 1px solid rgba(217,164,65,.45);
      padding: 5px 9px;
      border-radius: 999px;
      font-size: 12px;
      white-space: nowrap;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }

    .feat .feat-body{
      padding:10px 10px 12px;
      display:flex;
      flex-direction:column;
      gap:6px;
      flex:1;
    }
    .feat .name{ font-weight:900; font-size:13px; line-height:1.2; }
    .feat .meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-top:auto;
    }
    .feat .price{
      font-weight:1000;
      color:var(--brand);
      background: rgba(217,164,65,.16);
      padding:4px 8px;
      border-radius:999px;
      border: 1px solid rgba(217,164,65,.30);
      font-size:12px;
    }
    .feat .tag{ font-weight:800; color:var(--muted); font-size:11.5px; }

    /* Categories */
    .category{
      margin-top:18px;
      padding:14px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.82);
      border: 1px solid var(--line);
      box-shadow: 0 8px 22px rgba(0,0,0,.06);
      scroll-margin-top: calc(var(--topbar-h) + env(safe-area-inset-top) + 18px);
    }
    .category-header{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .category-title{ font-size:16px; font-weight:1000; letter-spacing:.2px; margin:0; }
    .category-tag{
      font-size:12px;
      font-weight:900;
      color:#fff;
      background: linear-gradient(135deg, rgba(11,42,43,.92), rgba(21,91,79,.90));
      padding:7px 10px;
      border-radius:999px;
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
      border: 1px solid rgba(255,255,255,.16);
    }
    .category-description{
      margin:0 0 12px;
      color:var(--muted);
      font-weight:650;
      font-size:13px;
      line-height:1.45;
    }

    .items{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    .item{
      background: rgba(255,255,255,.95);
      border:1px solid var(--line);
      border-radius: var(--radius2);
      overflow:hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,.07);
      display:flex;
      flex-direction:column;
      min-height: 290px;
    }
    .item-img{
      width:100%;
      height:150px;
      object-fit:cover;
      background:#eee;
      display:block;
      filter: brightness(1.05) contrast(1.02);
    }
    .no-img{
      width:100%;
      height:150px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg, rgba(11,42,43,.12), rgba(217,164,65,.10));
      color: rgba(11,42,43,.75);
      font-weight:900;
      font-size:12px;
      letter-spacing:.2px;
    }
    .item-body{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1;
    }
    .item-header-line{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
    }
    .item-name{ font-weight:1000; font-size:14px; line-height:1.2; }
    .item-price{
      font-weight:1000;
      color: var(--brand);
      background: rgba(217,164,65,.18);
      border: 1px solid rgba(217,164,65,.30);
      padding:6px 10px;
      border-radius:999px;
      font-size:13px;
      white-space:nowrap;
      min-width: 68px;
      text-align:center;
    }
     .item-note{
      color:var(--muted);
      font-size:12.5px;
      font-weight:650;
      line-height:1.35;
      margin: 0;            /* evita margen raro */
    }
    .item-note:empty{ display:none; }  /* si está vacío, no ocupa espacio */

    
    .item-actions{
      margin-top:auto;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .mini{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border: 1px solid var(--line);
      background:#fff;
      color: var(--ink);
      text-decoration:none;
      font-weight:900;
      font-size:12px;
    }
    .mini.wa{
      border:0;
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color:#fff;
    }

    /* Selección / carrito */
    .mini-select{ user-select:none; }
    .mini-select.is-selected{
      background: linear-gradient(135deg, #0b2a2b, #145b6b);
      border: 0;
      color:#fff;
    }
    .mini-select.is-selected::after{
      content:" ✓";
      font-weight:1000;
    }
    .fab.disabled{
      opacity:.55;
      pointer-events:none;
      filter: grayscale(.15);
    }


    .mini-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border: 1px solid var(--line);
      background:#fff;
      color: var(--ink);
      text-decoration:none;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
    }
    
    /* Floating buttons (WhatsApp + Categorías) */

    .floating-ctas{
      position: fixed;
      right: calc(16px + env(safe-area-inset-right));
      bottom: calc(16px + env(safe-area-inset-bottom));
      display: grid;
      gap: 10px;
      z-index: 999;
    }  
   
    .float-btn{
      appearance: none;
      border: 1px solid rgba(12,107,115,.25);
      background: rgba(255,255,255,.92);
      color: #0b2c2f;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 800;
      letter-spacing: .2px;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      display: inline-flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .float-btn .chev{ font-weight: 900; opacity: .9; }
    .float-btn:active{ transform: translateY(1px); }

    /* Categories overlay */
    .catmenu{
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      width: min(360px, calc(100vw - 32px));
      max-height: min(520px, calc(100vh - 140px));
      overflow: auto;
      background: rgba(255,255,255,.96);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 24px 60px rgba(0,0,0,.25);
      z-index: 2100;
    }
    .catmenu a{
      display: block;
      padding: 14px 14px;
      border-radius: 14px;
      text-decoration: none;
      color: #0b2c2f;
      font-weight: 800;
    }
    .catmenu a:hover{ background: rgba(12,107,115,.08); }
    .catmenu a:active{ background: rgba(12,107,115,.14); }

    .catmenu-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      z-index: 2050;
    }

    /* Small helpers */
    .hide{ display:none !important; }
    .muted{ color: var(--muted); }
    .divider{ height:1px; background: var(--line); margin:12px 0; }

    /* Footer (consistente con index.html) */
    .site-footer{
      background: var(--madera-oscura);
      color: #eee;
      padding: 22px 0;
      font-size: 13px;
      border-top: 3px solid var(--naranja);
      margin-top: 24px;
    }
    .footer-inner{
      max-width:1120px;
      margin:0 auto;
      padding:0 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
      justify-content:space-between;
    }
    .footer-links a{
      color:#eee;
      text-decoration:none;
      margin-right:12px;
      font-weight:700;
    }
    .footer-links a:hover{ color: var(--turquesa); }
    @media (min-width: 640px){
      .footer-inner{ flex-direction:row; align-items:center; }
    }

    /* Responsive */
    @media (max-width: 980px){
      .featured-grid{ grid-template-columns: repeat(3, 1fr); }
      .items{ grid-template-columns: repeat(2, 1fr); }
      .hero-inner{ grid-template-columns: 1fr; }
      .hero-cta{ justify-content:flex-start; }
      .actions{ min-width:auto; }
    }
    @media (max-width: 560px){
    
      /* Aumenta la altura del header fijo en móvil */
      :root{ --topbar-h: 118px; }
    
      .topbar-inner{
        height: auto;                 /* importante */
        padding: 10px 12px;
        flex-wrap: wrap;              /* permite 2 filas */
        gap: 10px;
        align-items: center;
      }
    
      /* Fila 1 */
      .brand{ 
        min-width: 0;
        flex: 1 1 auto;
        order: 1;
      }
      .actions{
        min-width: 0;
        flex: 0 0 auto;
        order: 2;
      }
    
      /* Fila 2: búsqueda a ancho completo */
      .search-wrap{
        display: flex;                /* vuelve a mostrar */
        flex: 0 0 100%;
        order: 3;
        justify-content: stretch;
      }
      .search{
        max-width: 100%;
      }
      .search input{
        font-size: 14px;
        padding: 12px 42px 12px 14px;
      }
    }

    
    .brand-link{
      display:flex;
      align-items:center;
      text-decoration:none;
    }
    .brand-mark{
      display:block;
      height:44px;
      width:auto;
      object-fit:contain;
    }
    .btn-call{
      border:0;
      background: rgba(255,255,255,.92);
      color: var(--brand);
      box-shadow: 0 14px 30px rgba(0,0,0,.10);
      font-weight:1000;
    }
    .btn-call:hover{ transform: translateY(-1px); }
    .btn-light{
      background: rgba(255,255,255,.92);
      color: var(--brand);
      border:0;
    }

    .float-cat{
      border-color: rgba(12,107,115,.35);
    }

    .float-call{
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.92);
      color: #0b2c2f;
      text-decoration:none;
      font-weight:1000;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      border: 1px solid rgba(12,107,115,.25);
    }

    /* Header en 2 filas (logo + categorías / buscador abajo) */
    .topbar-inner.topbar-stack{
      height: auto;                 /* ya no forzamos 68px */
      padding: 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .topbar-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    
    .topbar-search .search{
      max-width: none;              /* ancho completo */
    }
    
    .topbar-search .search input{
      width: 100%;
    }
    
    /* Ajuste del alto real del header para que NO tape contenido */
    :root{ --topbar-h: 118px; }     /* puedes subir/bajar según tu gusto */

      /* ===== Header: base (móvil / por defecto) ===== */
    .topbar-inner.topbar-stack{
      height: auto;
      padding: 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .topbar-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    
    .topbar-search .search{
      max-width: none;
    }
    
    .topbar-search .search input{
      width: 100%;
    }
    
    /* Altura base para móvil (porque son 2 filas) */
    :root{ --topbar-h: 118px; }
    
    /* ===== Desktop: 1 sola línea ===== */
    @media (min-width: 900px){
      .topbar-inner.topbar-stack{
        flex-direction: row;          /* una sola línea */
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        height: var(--topbar-h);      /* vuelve a altura fija */
        padding: 0 16px;
      }
    
      /* En desktop, la fila 1 y fila 2 se vuelven "bloques" en la misma línea */
      .topbar-row{
        flex: 0 0 auto;
        gap: 14px;
      }
    
      .topbar-search{
        flex: 1;                      /* el buscador ocupa el centro */
        display:flex;
        justify-content:center;
      }
    
      .topbar-search .search{
        width: 100%;
        max-width: 520px;             /* como lo tenías */
      }
    
      /* Ajusta altura de header en desktop (1 sola línea) */
      :root{ --topbar-h: 68px; }
    }

     /* ---- Botones flotantes: más visibles y seleccionables ---- */
    .fab a{
      background: #25D366;          /* verde WhatsApp */
      color: #fff;
      border: 2px solid rgba(255,255,255,.35);
    }
    
    .fab button{
      background: #ff7a00;          /* naranja Categorías */
      color: #fff;
      border: 2px solid rgba(255,255,255,.35);
    }
    
    /* Hover + “tap feedback” */
    .fab a:hover, .fab button:hover{
      filter: brightness(1.06);
    }
    
    .fab a:active, .fab button:active{
      transform: translateY(1px);
    }
    
    /* Accesibilidad: cuando navegan con teclado */
    .fab a:focus-visible, .fab button:focus-visible{
      outline: 3px solid rgba(255,255,255,.85);
      outline-offset: 3px;
      box-shadow: 0 0 0 4px rgba(0,0,0,.25);
    }
    
    /* Cursor de “esto se puede tocar” */
    .fab a, .fab button{
      cursor: pointer;
    }

    /* ===== Items compactos (sin imagen) para bebidas ===== */
    .item.item--compact{
      min-height: auto;
    }
    
    .item.item--compact .item-body{
      padding: 12px;
    }
    
    .item.item--compact .item-note{
      min-height: 0;
    }
    
    .item.item--compact .item-actions{
      margin-top: 8px;
    }
    
    /* opcional: alinear mejor en compactos */
    .item.item--compact .item-header-line{
      align-items: center;
    }

    .fab a, .fab button{
      background: #0ea5a4; /* tu color de marca */
      color: #fff;
      border: 2px solid rgba(255,255,255,.35);
      cursor: pointer;
    }
    .fab-whatsapp { background: #1faa59; }

    .fab-call { background: #1f2937; } /* ejemplo */
    .fab-call:hover { filter: brightness(1.08); }

    /* Chip de categoría en tarjetas: pequeño y elegante */
    .card .badge, 
    .card .chip,
    .menu-card .badge,
    .menu-card .chip{
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .2px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.08);
      color: #111;
    }

    .fab{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 999px;
      color: #fff;
      font-weight: 700;
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(10px);
    }
    .fab svg{ width:20px; height:20px; fill: currentColor; }
    .fab-whatsapp{ background:#1faa59; }
    .fab-call{ background: rgba(0,0,0,.55); }
    
    @media (max-width: 480px){
      .fab span{ display:none; }
      .fab{ padding: 12px; border-radius: 16px; }
    } 

    /* Quita subrayado a los botones flotantes */
    .fab { text-decoration: none; }
    .fab:visited { text-decoration: none; }
    .fab:hover { text-decoration: none; }
    .fab span { text-decoration: none; }

    /* Evita que el nombre empuje el precio fuera */
    .item-header-line{
      align-items: flex-start;
    }
    
    .item-name{
      font-weight:1000;
      font-size:14px;
      line-height:1.2;
      margin: 2px 0 0;
    
      /* 2 líneas máximas, sin cortes raros */
      display:-webkit-box;
      -webkit-box-orient:vertical;
      -webkit-line-clamp:2;
      overflow:hidden;
    
      word-break: normal;
      overflow-wrap: normal;
      hyphens: none;
    }


    
    .item-price{
      flex: 0 0 auto;               /* el precio nunca se comprime */
    }
    
  .top-badge{
    display:inline-flex;
    margin-left:8px;
    padding:3px 8px;
    border-radius:999px;
    font-size:11px;
    font-weight:900;
    background: rgba(245,124,34,.16);
    border: 1px solid rgba(245,124,34,.28);
    color: var(--brand);
    white-space: nowrap;
  }

  .top-badge-wrap{ margin-top:6px; }
  .top-badge{ margin-left:0; }

    
  /* Acciones: layout estable (no se deforma en móvil) */
  .item-actions{
    margin-top:auto;
    display:grid;
    grid-template-columns: 1fr auto;  /* WhatsApp grande + Ingredientes compacto */
    gap:8px;
    align-items:center;
  }
  
  /* Botón principal */
  .item-actions .mini.wa{
    width:100%;
    justify-content:center;
    padding:10px 14px;
    border-radius:14px;              /* evita “círculos” raros */
    line-height:1.1;
  }
  
  /* Botón ingredientes */
  .item-actions .mini-btn{
    padding:10px 12px;
    border-radius:14px;
    line-height:1.1;
  }
  
  /* En móvil: apila bonito y normal */
  @media (max-width:560px){
    .item-actions{
      grid-template-columns: 1fr;
    }
  }

  /* Precio como badge sobre la imagen */
  .item{ position: relative; }
  
  .item-media{ position: relative; }
  
  .item-img, .no-img{ display:block; }
  
  .item-price{
    position: absolute;
    right: 10px;
    bottom: 10px;
    z-index: 2;
  
    font-weight:1000;
    color: var(--brand);
    background: rgba(255,247,232,.95);
    border: 1px solid rgba(217,164,65,.45);
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 13px;
    white-space: nowrap;
    box-shadow: 0 10px 18px rgba(0,0,0,.12);
  }
  
  /* Si no hay imagen y es "no-img", igual funciona */
  .item-media .no-img{ position: relative; }

  /* ===== Fix bebidas compactas ===== */
  .item.item--compact{
    min-height: auto;          /* quita el alto grande */
  }
  
  .item.item--compact .item-body{
    gap: 10px;
  }
  
  .item.item--compact .item-actions{
    margin-top: 8px;           /* NO empujar al fondo */
  }

  /* Precio inline solo para bebidas compactas */
  .item-price-inline{
    font-weight:1000;
    color: var(--brand);
    background: rgba(217,164,65,.18);
    border: 1px solid rgba(217,164,65,.30);
    padding:6px 10px;
    border-radius:999px;
    font-size:13px;
    white-space:nowrap;
  }

  

/* Cantidades (+ / -) en tarjetas */
.qty-ctrl{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 8px;
  border:1px solid var(--line);
  border-radius:999px;
  background:#fff;
}
.qty-btn{
  width:28px;
  height:28px;
  border-radius:999px;
  border:1px solid rgba(12,107,115,.25);
  background:rgba(255,255,255,.92);
  color:#0b2c2f;
  font-weight:900;
  cursor:pointer;
  line-height:1;
}
.qty-val{
  min-width:18px;
  text-align:center;
  font-weight:900;
  color:var(--ink);
  font-size:13px;
}

/* FAB extra: Pedido */
.fab-cart{
  background:#0b2c2f;
}

/* Panel mini carrito */
.cart-panel{
  position: fixed;
  right: calc(16px + env(safe-area-inset-right));
  bottom: calc(92px + env(safe-area-inset-bottom));
  width: min(360px, calc(100vw - 32px));
  max-height: min(55vh, 420px);
  background: rgba(255,255,255,.98);
  border:1px solid var(--line);
  border-radius: 18px;
  box-shadow: 0 16px 40px rgba(0,0,0,.12);
  z-index: 998;
  overflow: hidden;

  /* CLAVE: layout en columna para que el footer nunca se corte */
  display:none;
  flex-direction:column;
}
.cart-panel.open{ display:flex; }
.cart-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 12px;
  background: linear-gradient(180deg, rgba(31,179,110,.12), rgba(255,255,255,0));
  border-bottom:1px solid rgba(0,0,0,.06);
}
.cart-title{ font-weight:900; color:var(--ink); }
.cart-close{
  width:32px; height:32px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#fff;
  cursor:pointer;
  font-size:18px;
  line-height:1;
}
.cart-list{
  padding:10px 12px;

  /* CLAVE: el listado crece y scrollea; el footer queda visible */
  flex: 1 1 auto;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
}
.cart-empty{ color: var(--muted); font-size:13px; padding:10px 2px; }
.cart-row{
  display:flex;
  gap:10px;
  justify-content:space-between;
  padding:10px 0;
  border-bottom:1px dashed rgba(0,0,0,.08);
}
.cart-row:last-child{ border-bottom:none; }
.cart-row-name{ font-weight:900; color:var(--ink); font-size:13px; }
.cart-row-sub{ color:var(--muted); font-size:12px; margin-top:2px; }
.cart-row-right{ text-align:right; }
.cart-row-total{ font-weight:900; color:var(--ink); font-size:13px; }
.cart-row-qty{ display:inline-flex; align-items:center; gap:6px; margin-top:6px; }
.cart-mini-btn{
  width:26px; height:26px;
  border-radius:999px;
  border:1px solid rgba(12,107,115,.25);
  background:#fff;
  cursor:pointer;
  font-weight:900;
  line-height:1;
}
.cart-mini-val{ min-width:16px; text-align:center; font-weight:900; font-size:12px; }

.cart-foot{
  padding:10px 12px 12px;
  border-top:1px solid rgba(0,0,0,.06);
  background:#fff;

  /* CLAVE: footer siempre visible */
  flex: 0 0 auto;
  position: sticky;
  bottom: 0;
  padding-bottom: calc(12px + env(safe-area-inset-bottom));
}
.cart-total{ font-weight:900; color:var(--ink); margin-bottom:10px; }
.cart-actions{ display:flex; gap:10px; }

/* Fix mobile: evita que "Limpiar" se corte (mejor layout en pantallas pequeñas) */
@media (max-width: 480px){
  .cart-panel{ bottom: calc(84px + env(safe-area-inset-bottom)); }
  .cart-actions{
    display:grid;
    grid-template-columns: 1fr 1.2fr;
    gap:10px;
  }
  .cart-clear, .cart-send{
    width:100%;
    min-height:44px;
    padding:12px 14px;
  }
}
.cart-clear{
  flex:1;
  border-radius: 999px;
  border:1px solid var(--line);
  background:#fff;
  padding:10px 12px;
  font-weight:900;
  cursor:pointer;
}
.cart-send{
  flex:1.2;
  border-radius: 999px;
  border:1px solid rgba(0,0,0,.0);
  background: var(--wa);
  color:#fff;
  text-decoration:none;
  padding:10px 12px;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}
.cart-send.disabled{ opacity:.6; pointer-events:none; }


/* Observaciones en carrito */
.cart-notes-label{
  display:block;
  font-weight:900;
  color:var(--ink);
  font-size:12px;
  margin:8px 0 6px;
}
.cart-notes{
  width:100%;
  resize:none;
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px 12px;
  font-size:13px;
  outline:none;
  background:#fff;
}
.cart-notes:focus{
  border-color: rgba(12,107,115,.35);
  box-shadow: 0 0 0 3px rgba(31,179,110,.12);
}
</style>
</head>

<body>
  <a class="skip-link" href="#contenido">Saltar al contenido</a>

<!-- TOPBAR -->
<header class="topbar std-header" id="top">
  <div class="topbar-inner topbar-stack">
    
    <!-- FILA 1 -->
    <div class="topbar-row">
      <div class="brand">
        <a class="brand-link" href="index.html" aria-label="Ir al inicio">
          <img class="brand-mark"
               src="img/letrasflorestabrava.png"
               alt="Floresta Brava"
               width="210" height="44"
               loading="eager" decoding="async">
        </a>
      </div>

      <div class="actions">
        <button
          aria-label="Abrir categorías"
          aria-controls="catMenu"
          class="btn btn-light"
          id="catFloat"
          type="button">
          Categorías ▾
        </button>
      </div>
    </div>

    <!-- FILA 2 -->
    <div class="topbar-search">
      <div class="search">
        <input id="q" type="search" placeholder="Buscar: encebollado, ceviche, bolón..." autocomplete="off" />
        <button id="clear" type="button" title="Limpiar búsqueda" aria-label="Limpiar búsqueda">✕</button>
      </div>
    </div>

  </div>
</header>



  <main class="wrap" id="contenido">
    <!-- HERO / IMAN -->
    <section aria-label="Promoción principal" class="hero">
      <div class="hero-inner">
        <div>
          <h2>Menú del día desde <span style="color:var(--gold)">$2,75</span></h2>
          <p>Sazón casera, porciones generosas y atención rápida. Pide por WhatsApp y te lo tenemos listo.</p>

          <div class="hero-badges">
            <div class="badge"><strong>Listo en minutos</strong></div>
            <div class="badge"><strong>Porciones que llenan</strong></div>
          </div>
        </div>

        <div class="hero-cta">
          <a class="btn btn-primary" href="#" id="waHero" rel="noopener" target="_blank">Pedir por WhatsApp</a>
          <a class="btn btn-light" href="#destacados">Ver destacados</a>
          <a class="btn btn-light" href="#mariscos">Ir a mariscos</a>
        </div>
      </div>
    </section>

    <!-- QUICK NAV -->
    <nav aria-label="Categorías" class="chips">
      <a class="chip" href="#almuerzos">Almuerzos <small>desde $2,75</small></a>
      <a class="chip" href="#desayunos">Desayunos</a>
      <a class="chip" href="#mariscos">Mariscos</a>
      <a class="chip" href="#carnes">Carnes</a>
      <a class="chip" href="#pollos">Pollos</a>
      <a class="chip" href="#gaseosas">Bebidas</a>
      <a class="chip" href="#pinchos">Pinchos</a>
    </nav>

    <!-- FEATURED -->
    <section aria-label="Destacados" class="featured" id="destacados">
      <div class="section-title">
        <h3>Destacados</h3>
        <span>Lo más pedido</span>
      </div>
      <div class="featured-grid" id="featuredGrid"></div>
    </section>

    <!-- CATEGORIES -->
    <section class="category" id="desayunos">
      <div class="category-header">
        <h3 class="category-title">Desayunos</h3>
        <div class="category-tag">Desde las 08h00</div>
      </div>
      <p class="category-description">Desayunos típicos para arrancar el día con energía.</p>
      <div class="items" data-category="Desayunos"></div>
    </section>
    
    <section class="category" id="almuerzos">
      <div class="category-header">
        <h3 class="category-title">Almuerzos</h3>
        <div class="category-tag">Menú del día</div>
      </div>
      <p class="category-description">Opciones completas y económicas para todos los días.</p>
      <div class="items" data-category="Almuerzos"></div>
    </section>

    <section class="category" id="carnes">
      <div class="category-header">
        <h3 class="category-title">Carnes</h3>
        <div class="category-tag">Platos fuertes</div>
      </div>
      <p class="category-description">Cortes a la plancha o apanados, con acompañantes completos.</p>
      <div class="items" data-category="Carnes"></div>
    </section>

    <section class="category" id="mariscos">
      <div class="category-header">
        <h3 class="category-title">Mariscos</h3>
        <div class="category-tag">Sabores de la costa</div>
      </div>
      <p class="category-description">Ceviches, arroces y platos calientes con mariscos frescos.</p>
      <div class="items" data-category="Mariscos"></div>
    </section>

    <section class="category" id="pollos">
      <div class="category-header">
        <h3 class="category-title">Pollos</h3>
        <div class="category-tag">A la carta</div>
      </div>
      <p class="category-description">Platos de pollo bien sazonados y servidos con acompañantes.</p>
      <div class="items" data-category="Pollos"></div>
    </section>

    <section class="category" id="pinchos">
      <div class="category-header">
        <h3 class="category-title">Pinchos</h3>
        <div class="category-tag">A la parrilla</div>
      </div>
      <p class="category-description">Ideales para acompañar tu merienda.</p>
      <div class="items" data-category="Pinchos"></div>
    </section>    

    <section class="category" id="gaseosas">
      <div class="category-header">
        <h3 class="category-title">Bebidas</h3>
        <div class="category-tag">Frías</div>
      </div>
      <p class="category-description">Gaseosas y cervezas para acompañar tu comida.</p>

      <div class="divider"></div>
      <div class="section-title" style="margin:0 0 10px;">
        <h3 style="margin:0;font-size:14px;">Jugos</h3>
        <span></span>
      </div>
      <div class="items" data-category="Jugos"></div>
      
      <div class="divider"></div>
      <div class="section-title" style="margin:0 0 10px;">
        <h3 style="margin:0;font-size:14px;">Gaseosa</h3>
        <span></span>
      </div>
      <div class="items" data-category="Gaseosa"></div>

      <div class="divider"></div>
      <div class="section-title" style="margin:0 0 10px;">
        <h3 style="margin:0;font-size:14px;">Cerveza</h3>
        <span></span>
      </div>
      <div class="items" data-category="Cerveza"></div>
    </section>

  </main>

  <!-- Botones flotantes -->
  <div class="floating-ctas" aria-label="Accesos rápidos">
    <a class="fab fab-whatsapp" id="waCart"
       href="#"
       target="_blank" rel="noopener" aria-label="Enviar pedido por WhatsApp">
      <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false">
        <path d="M19.11 17.45c-.3-.15-1.77-.87-2.04-.97-.27-.1-.47-.15-.67.15-.2.3-.77.97-.94 1.17-.17.2-.35.22-.65.07-.3-.15-1.25-.46-2.38-1.48-.88-.78-1.47-1.75-1.64-2.05-.17-.3-.02-.46.13-.61.14-.14.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.07-.15-.67-1.6-.92-2.2-.24-.58-.49-.5-.67-.5h-.57c-.2 0-.52.07-.8.37-.27.3-1.05 1.02-1.05 2.5 0 1.47 1.08 2.9 1.23 3.1.15.2 2.13 3.25 5.16 4.56.72.31 1.28.5 1.71.64.72.23 1.38.2 1.9.12.58-.09 1.77-.72 2.02-1.42.25-.7.25-1.3.17-1.42-.07-.12-.27-.2-.57-.35z"/>
        <path d="M16.02 3C8.84 3 3 8.84 3 16.02c0 2.3.6 4.47 1.65 6.36L3 29l6.81-1.63c1.82 1 3.92 1.57 6.21 1.57C23.2 28.94 29 23.2 29 16.02 29 8.84 23.2 3 16.02 3zm0 23.64c-2.06 0-3.97-.6-5.59-1.63l-.4-.25-4.04.97.96-3.93-.26-.41a10.48 10.48 0 0 1-1.64-5.67c0-5.82 4.74-10.56 10.56-10.56 5.82 0 10.56 4.74 10.56 10.56 0 5.82-4.74 10.56-10.56 10.56z"/>
      </svg>
      <span>Enviar (0)</span>
    </a>
<a class="fab fab-cart" id="cartToggle"
   href="#"
   aria-label="Ver pedido">
  <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.2 6h13.1c.7 0 1.2.7 1 1.4l-1.6 6.1c-.2.6-.8 1-1.4 1H8.1l.3 1.2c.1.4.5.8 1 .8H19v2H9.4c-1.4 0-2.6-1-2.9-2.4L4.3 4H2V2h3.7l1.5 4z"/>
  </svg>
  <span>Pedido</span>
</a>
  
    <a class="fab fab-call" href="tel:+593983603626" aria-label="Llamar">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M6.6 10.8c1.6 3 3.7 5.1 6.7 6.7l2.2-2.2c.3-.3.7-.4 1.1-.3 1.2.4 2.5.6 3.9.6.6 0 1 .4 1 1V21c0 .6-.4 1-1 1C10.1 22 2 13.9 2 3c0-.6.4-1 1-1h3.9c.6 0 1 .4 1 1 0 1.4.2 2.7.6 3.9.1.4 0 .8-.3 1.1L6.6 10.8z"/>
      </svg>
      <span>Llamar</span>
    </a>
  </div

<!-- Mini panel de carrito -->
<aside class="cart-panel empty" id="cartPanel" aria-label="Tu pedido">
  <div class="cart-head">
    <div class="cart-title">Tu pedido</div>
    <button type="button" class="cart-close" id="cartClose" aria-label="Cerrar">×</button>
  </div>
  <div class="cart-list"></div>
  <div class="cart-foot">
    <div class="cart-total">Total: —</div>
<label class="cart-notes-label" for="cartNotes">Observaciones (opcional)</label>
<textarea class="cart-notes" id="cartNotes" rows="2" placeholder="Ej: sin cebolla, poco ají, para llevar, enviar salsas aparte..."></textarea>
    <div class="cart-actions">
      <button type="button" class="cart-clear" id="cartClear">Limpiar</button>
      <a class="cart-send" id="cartSend" href="#" target="_blank" rel="noopener">Enviar por WhatsApp</a>
    </div>
  </div>
</aside>>


  <!-- Menú de categorías (overlay) -->
  <nav aria-label="Categorías" class="catmenu" hidden id="catMenu">
    <a href="#desayunos">Desayunos</a>
    <a href="#almuerzos">Almuerzos</a>
    <a href="#mariscos">Mariscos</a>
    <a href="#carnes">Carnes</a>
    <a href="#pollos">Pollos</a>
    <a href="#pinchos">Pinchos</a>
    <a href="#gaseosas">Bebidas</a>
  </nav>

  <script>
    /***********************
     * CONFIG PRODUCCION
     ***********************/
    const IMG_BASE = "img/";
    const WHATSAPP_NUMBER = "593983603626";
    const WHATSAPP_PREFIX = "Hola, vengo del menú QR de Floresta Brava. ";

    const FEATURED = [
      { category: "Mariscos", name: "Encebollado", tag: "Clásico" },
      { category: "Mariscos", name: "Ceviche mixto", tag: "Top" },
      { category: "Mariscos", name: "Chaulafán", tag: "Rápido" },
      { category: "Carnes",  name: "Bisteck costeño", tag: "Fuerte" },
      { category: "Carnes",  name: "Carne apanada", tag: "Crocante" },
      { category: "Desayunos", name: "Tigrillo", tag: "Desayuno" },
    ];

    const MENU = [
      {
        id: "almuerzos",
        title: "Almuerzos",
        desc: "Opciones completas y económicas para todos los días.",
        items: [
          { name: "Almuerzos / Meriendas", price: 2.75, file: "almuerzo.webp" },
          { name: "Almuerzos con encebollado", price: 3.50, file: "almuerzo-encebollado.webp" },
          { name: "Meriendas con pincho", price: 3.50, file: "merienda-pincho.webp" },
          { name: "Segundo del día", price: 2.25, file: "segundo.webp" },
          { name: "Sopa del día", price: 1.50, file: "sopasola.webp" },
        ],
      },
      {
        id: "carnes",
        title: "Carnes",
        desc: "Cortes preparados a la plancha o apanados, con guarniciones completas.",
        items: [
          { name: "Bisteck costeño", price: 5.25, file: "bisteckcosteno.webp" },
          { name: "Carne apanada", price: 5.25, file: "carneapanada.webp" },
          { name: "Chuleta", price: 6.00, file: "chuleta.webp" },
          { name: "Churrasco", price: 5.25, file: "churrasco.webp" },
          { name: "Lomo a la pimienta", price: 5.25, file: "lomoalapimienta.webp" },
          { name: "Lomo a la plancha", price: 5.25, file: "lomolaplancha.webp" },
          { name: "Menestras", price: 5.25, file: "menestradecarne.webp" },
          { name: "Yaguarlocro", price: 3.50, file: "yaguarlocro.webp" },
        ],
      },
      {
        id: "desayunos",
        title: "Desayunos",
        desc: "Desayunos típicos ecuatorianos para arrancar el día con energía.",
        items: [
          { name: "Combo Bolón", price: 2.50, file: "bolon-estofado.webp" },
          { name: "Corviches", price: 1.00, file: "corviches.webp" },
          { name: "Desayuno completo", price: 3.75, file: "desayuno_completo.webp" },
          { name: "Desayuno continental", price: 2.75, file: "desayunocontinental.webp" },
          { name: "Empanadas", price: 1.00, file: "empanadas.webp" },
          { name: "Muchines", price: 1.00, file: "muchin.webp" },
          { name: "Tamales", price: 1.00, file: "tamal.webp" },
          { name: "Bolón", price: 1.00, file: "bolonsolo.webp" },
          { name: "Tigrillo", price: 4.00, file: "tigrillo.webp" },
        ],
      },
      {
        id: "mariscos",
        title: "Mariscos",
        desc: "Ceviches, arroces y platos calientes preparados con mariscos frescos.",
        items: [
          { name: "Arroz con camarón", price: 8.50, file: "arrozconcamaron.webp" },
          { name: "Arroz con concha", price: 8.50, file: "arrozconconcha.webp" },
          { name: "Arroz mixto", price: 10.00, file: "arrozmixto.webp" },
          { name: "Bandera", price: 10.00, file: "bandera.webp" },
          { name: "Bochinche", price: 10.00, file: "bochinche.webp" },
          { name: "Camarones al ajillo", price: 8.50, file: "camaronesalajillo.webp" },
          { name: "Camarones apanados", price: 8.50, file: "camaronesapanados.webp" },
          { name: "Cazuelas", price: 8.50, file: "cazueladecamaron.webp" },
          { name: "Ceviche de camarón", price: 8.50, file: "cevichedecamaron.webp" },
          { name: "Ceviche de concha", price: 8.50, file: "cevichedeconcha.webp" },
          { name: "Ceviche de pescado", price: 8.00, file: "cevichedepescado.webp" },
          { name: "Ceviche mixto", price: 8.50, file: "cevichemixto.webp" },
          { name: "Cevichón", price: 4.50, file: "cevichon.webp" },
          { name: "Chaulafán", price: 3.75, file: "chaulafan.webp" },
          { name: "Chupe de pescado", price: 3.75, file: "chupedepescado.webp" },
          { name: "Corvina", price: 8.50, file: "corvina.webp" },
          { name: "Encebollado", price: 3.00, file: "encebollado.webp" },
          { name: "Encebollado mixto", price: 8.50, file: "encebolladomixto.webp" },
          { name: "Guatita", price: 3.00, file: "guatita.webp" },
          { name: "Langostinos a la brava", price: 10.00, file: "langostinosalabrava.webp" },
          { name: "Sopa de camarón", price: 8.50, file: "sopadecamaron.webp" },
        ],
      },
      {
        id: "pollos",
        title: "Pollos",
        desc: "Platos de pollo jugosos y bien sazonados, con acompañantes.",
        items: [
          { name: "Arroz con pollo", price: 3.75, file: "arrozconpollo.webp" },
          { name: "Pechuga a la plancha", price: 5.25, file: "pechugaalaplancha.webp" },
          { name: "Pechuga apanada", price: 5.25, file: "pechugaapanada.webp" },
          { name: "Seco de pollo", price: 4.00, file: "secodepollo.webp" },
        ],
      },
      {
        id: "jugos",
        title: "Jugos",
        desc: "Opciones individuales y jarras.",
        items: [
          { name: "Vaso de Jugo", price: 2.00, file: "" },
          { name: "Limonada", price: 1.50, file: "" },
          { name: "Jarra de Jugo", price: 6.00, file: "" },
        ],
      },      
      {
        id: "gaseosas",
        title: "Gaseosa",
        desc: "Opciones individuales y familiares.",
        items: [
          { name: "Gaseosa Mediana", price: 1.00, file: "" },
          { name: "Gaseosa Personal", price: 0.65, file: "" },
          { name: "Gaseosa 1.35 L", price: 2.25, file: "" },
          { name: "Agua sin gas", price: 1.00, file: "" },
          { name: "Agua con gas", price: 1.00, file: "" },

        ],
      },
      {
        id: "cerveza",
        title: "Cerveza",
        desc: "Cervezas nacionales.",
        items: [
          { name: "Cerveza Pilsener 600 ml", price: 2.25, file: "" },
          { name: "Cerveza Club 550 ml", price: 2.50, file: "" },
          { name: "Cerveza Artesanal", price: 3.00, file: "" },
          { name: "Cerveza Artesanal", price: 3.25, file: "" },
          { name: "Cerveza Artesanal", price: 3.50, file: "" },
        ],
      },
      {
        id: "pinchos",
        title: "Pinchos",
        desc: "Ideales para acompañar tu merienda.",
        items: [
          { name: "Pincho de carne", price: 1.00, file: "pincho-carne.webp" },
          { name: "Pincho de pollo", price: 1.00, file: "pincho-pollo.webp" },
          { name: "Pincho completo", price: 2.50, file: "pincho-completo.webp" }
        ],
      },
    ];

    function formatPrice(p) {
      if (p === null || p === undefined || p === "") return "";
      return "$" + Number(p).toFixed(2).replace(".", ",");
    }

    function waLink(message) {
      const base = "https://wa.me/" + WHATSAPP_NUMBER;
      return base + "?text=" + encodeURIComponent(message);
    }

    function waForItem(itemName, priceText) {
      const msg = WHATSAPP_PREFIX + "Quiero pedir: " + itemName + (priceText ? " (" + priceText + ")" : "") + ".";
      return waLink(msg);
    }

    /***********************
 * CARRITO (CANTIDADES) + PANEL MINI
 ***********************/
const CART = new Map(); // key: lower(name) -> { name, price, qty }

function cartKey(name){ return (name || "").toLowerCase().trim(); }

function normPrice(p){
  if (p === "" || p == null) return null;
  const n = Number(String(p).replace(",", "."));
  return Number.isFinite(n) ? n : null;
}

function setQty(name, price, qty){
  const key = cartKey(name);
  if (!key) return;
  const q = Math.max(0, Number(qty || 0));
  if (q === 0){
    CART.delete(key);
  } else {
    CART.set(key, { name, price: normPrice(price), qty: q });
  }
  syncCartUI();
}

function incQty(name, price, delta){
  const key = cartKey(name);
  const cur = CART.get(key);
  const next = Math.max(0, (cur ? (cur.qty || 0) : 0) + delta);
  setQty(name, price, next);
}

function cartCount(){
  let n = 0;
  for (const v of CART.values()) n += (v.qty || 0);
  return n;
}

function cartTotal(){
  let t = 0;
  for (const v of CART.values()){
    if (typeof v.price === "number") t += v.price * (v.qty || 0);
  }
  return t;
}

function buildCartMessage(){
  const notesEl = document.getElementById("cartNotes");
  const notes = (notesEl && notesEl.value) ? notesEl.value.trim() : "";

  if (CART.size === 0){
    const base = WHATSAPP_PREFIX + "Quiero hacer un pedido. ¿Me ayudas por favor?";
    return notes ? (base + "\nObservaciones: " + notes) : base;
  }

  const lines = [];
  lines.push(WHATSAPP_PREFIX + "Quiero pedir:");
  for (const v of CART.values()){
    const qty = v.qty || 0;
    const priceTxt = (typeof v.price === "number") ? formatPrice(v.price) : "";
    lines.push("- " + v.name + " x" + qty + (priceTxt ? " (" + priceTxt + " c/u)" : ""));
  }

  const total = cartTotal();
  if (total > 0){
    lines.push("Total aprox: " + formatPrice(total));
  }
  if (notes){
    lines.push("Observaciones: " + notes);
  }
  lines.push("Gracias.");
  return lines.join("
");
}

function toggleCartPanel(forceOpen){
  const panel = document.getElementById("cartPanel");
  if (!panel) return;
  const open = (typeof forceOpen === "boolean") ? forceOpen : !panel.classList.contains("open");
  panel.classList.toggle("open", open);
}

function syncCartUI(){
  const n = cartCount();

  // Botón flotante WhatsApp (sigue enviando directo)
  const waBtn = document.getElementById("waCart");
  if (waBtn){
    const span = waBtn.querySelector("span");
    if (span) span.textContent = "Enviar (" + n + ")";
    if (n === 0){
      waBtn.classList.add("disabled");
      waBtn.href = "#";
      waBtn.setAttribute("aria-disabled", "true");
    } else {
      waBtn.classList.remove("disabled");
      waBtn.removeAttribute("aria-disabled");
      waBtn.href = waLink(buildCartMessage());
    }
  }

  // Controles de cantidad en tarjetas
  document.querySelectorAll("[data-qty-name]").forEach(el => {
    const name = el.getAttribute("data-qty-name") || "";
    const it = CART.get(cartKey(name));
    el.textContent = String(it ? (it.qty || 0) : 0);
  });

  // Panel mini carrito
  const panel = document.getElementById("cartPanel");
  if (panel){
    const list = panel.querySelector(".cart-list");
    const totalEl = panel.querySelector(".cart-total");
    const send = panel.querySelector("#cartSend");
    const clearBtn = panel.querySelector("#cartClear");

    if (n === 0){
      panel.classList.remove("open");
      panel.classList.add("empty");
      if (list) list.innerHTML = '<div class="cart-empty">Selecciona productos con + para armar tu pedido.</div>';
      if (totalEl) totalEl.textContent = "Total: —";
      if (send) { send.classList.add("disabled"); send.href = "#"; }
      if (clearBtn) clearBtn.disabled = true;
    } else {
      panel.classList.remove("empty");
      if (list){
        const rows = [];
        for (const v of CART.values()){
          const qty = v.qty || 0;
          const lineTotal = (typeof v.price === "number") ? (v.price * qty) : null;
          const priceTxt = (typeof v.price === "number") ? formatPrice(v.price) : "—";
          const lineTxt  = (lineTotal != null) ? formatPrice(lineTotal) : "—";
          rows.push(
            `<div class="cart-row">
               <div class="cart-row-main">
                 <div class="cart-row-name">${v.name}</div>
                 <div class="cart-row-sub">${qty} x ${priceTxt}</div>
               </div>
               <div class="cart-row-right">
                 <div class="cart-row-total">${lineTxt}</div>
                 <div class="cart-row-qty">
                   <button type="button" class="cart-mini-btn" data-cart-minus="${v.name}" aria-label="Restar">−</button>
                   <span class="cart-mini-val">${qty}</span>
                   <button type="button" class="cart-mini-btn" data-cart-plus="${v.name}" data-cart-price="${v.price != null ? v.price : ""}" aria-label="Sumar">+</button>
                 </div>
               </div>
             </div>`
          );
        }
        list.innerHTML = rows.join("");
      }
      const total = cartTotal();
      if (totalEl) totalEl.textContent = (total > 0) ? ("Total aprox: " + formatPrice(total)) : "Total: —";
      if (send) { send.classList.remove("disabled"); send.href = waLink(buildCartMessage()); }
      if (clearBtn) clearBtn.disabled = false;
    }
  }
}

function setupCartSelection(){
  // + / - en tarjetas
  document.addEventListener("click", (e) => {
    const plus = e.target.closest("[data-plus-item]");
    const minus = e.target.closest("[data-minus-item]");
    if (!plus && !minus) return;

    e.preventDefault();
    if (plus){
      const name = plus.getAttribute("data-plus-item") || "";
      const price = plus.getAttribute("data-plus-price");
      incQty(name, price, +1);
      // abrir panel cuando agregan el primer producto
      if (cartCount() === 1) toggleCartPanel(true);
    } else if (minus){
      const name = minus.getAttribute("data-minus-item") || "";
      const price = minus.getAttribute("data-minus-price");
      incQty(name, price, -1);
    }
  });

  // Panel: abrir/cerrar, limpiar, ajustar cantidades dentro del panel
  document.addEventListener("click", (e) => {
    const openBtn = e.target.closest("#cartToggle");
    const closeBtn = e.target.closest("#cartClose");
    const clearBtn = e.target.closest("#cartClear");
    const plus = e.target.closest("[data-cart-plus]");
    const minus = e.target.closest("[data-cart-minus]");

    if (openBtn){ e.preventDefault(); toggleCartPanel(); return; }
    if (closeBtn){ e.preventDefault(); toggleCartPanel(false); return; }

    if (clearBtn){
      e.preventDefault();
      CART.clear();
      syncCartUI();
      return;
    }

    if (plus){
      e.preventDefault();
      const name = plus.getAttribute("data-cart-plus") || "";
      const price = plus.getAttribute("data-cart-price");
      incQty(name, price, +1);
      return;
    }

    if (minus){
      e.preventDefault();
      const name = minus.getAttribute("data-cart-minus") || "";
      // precio se toma del carrito actual
      const it = CART.get(cartKey(name));
      incQty(name, it ? it.price : null, -1);
      return;
    }
  });

  // Inicial
  syncCartUI();
// Si cambian las observaciones, actualizar links de WhatsApp en vivo
const notesEl = document.getElementById("cartNotes");
if (notesEl){
  notesEl.addEventListener("input", () => syncCartUI());
}
}

function findItem(categoryTitle, itemName) {
      const cat = MENU.find(c => c.title.toLowerCase() === categoryTitle.toLowerCase());
      if (!cat) return null;
      return cat.items.find(i => i.name.toLowerCase() === itemName.toLowerCase()) || null;
    }

    const FEATURED_SET = new Set(FEATURED.map(x => x.name.toLowerCase()));

    function itemHTML(it, categoryTitle) {
  const priceText = it.price != null ? formatPrice(it.price) : "";

  // Categorías donde NO queremos bloque "Sin foto" + sin botón Ingredientes
  const noPhotoCategories = ["Jugos", "Gaseosa", "Cerveza"];
  const isNoPhotoCat = noPhotoCategories.includes(categoryTitle);

  // Nota de venta por tipo (comida vs bebidas)
  let note = "";
  if (it.price == null) {
    note = "Consultar precio";
  } else if (categoryTitle === "Jugos") {
    note = "Natural y refrescante";
  } else if (categoryTitle === "Gaseosa" || categoryTitle === "Cerveza") {
    note = "Bien fría · Ideal para acompañar";
  } else {
    note = "Listo en minutos · Porciones que llenan";
  }

  // Badge "Más pedido" solo para comida (no bebidas)
  const isTop = !isNoPhotoCat && FEATURED_SET.has((it.name || "").toLowerCase());
  const topBadge = isTop ? `<span class="top-badge">Más pedido</span>` : "";

  // Si es comida y no hay file, mostramos "Sin foto".
  // Si es bebida y no hay file, hacemos tarjeta compacta sin imagen.
  let imgBlock = "";
  let extraClass = "";

  const priceBadge = `<div class="item-price">${priceText || "—"}</div>`;
  
  if (it.file) {
    imgBlock = `
      <div class="item-media">
        <img src="${IMG_BASE + it.file}" alt="${it.name}" class="item-img" loading="lazy"
             onerror="this.outerHTML='<div class=&quot;no-img&quot;>Sin foto</div>'">
        ${priceBadge}
      </div>`;
  } else {
    if (!isNoPhotoCat) {
      imgBlock = `
        <div class="item-media">
          <div class="no-img">Sin foto</div>
          ${priceBadge}
        </div>`;
    } else {
      extraClass = " item--compact";
      imgBlock = ""; // bebidas compactas sin imagen y sin badge
    }
  }

  
  // En bebidas no mostramos botón Ingredientes
  const showIngredients = !isNoPhotoCat;
  
  // Si es bebida compacta (sin imagen), mostramos precio en la cabecera
  const headerPrice = isNoPhotoCat
    ? `<span class="item-price-inline">${priceText || "—"}</span>`
    : ``;
  
  return `
    <article class="item${extraClass}" data-name="${(it.name || "").toLowerCase()}">
      ${imgBlock}
      <div class="item-body">
        <div class="item-header-line">
          <div class="item-name">${it.name}</div>
          ${headerPrice}
        </div>
        ${!isNoPhotoCat ? `<div class="top-badge-wrap">${topBadge || ""}</div>` : ``}
        ${(!isNoPhotoCat && note) ? `<div class="item-note">${note}</div>` : ``}
        <div class="item-actions">
          <div class="qty-ctrl" aria-label="Cantidad">
  <button class="qty-btn" type="button" data-minus-item="${it.name}" data-minus-price="${it.price != null ? it.price : ""}" aria-label="Restar">−</button>
  <span class="qty-val" data-qty-name="${it.name}">0</span>
  <button class="qty-btn" type="button" data-plus-item="${it.name}" data-plus-price="${it.price != null ? it.price : ""}" aria-label="Sumar">+</button>
</div>
          ${
            showIngredients
              ? `<button class="mini-btn" type="button" data-ingredients-for="${it.name}">Ingredientes</button>`
              : ``
          }
        </div>
      </div>
    </article>
  `;

}


    function renderCategory(categoryTitle, container) {
      const cat = MENU.find(c => c.title === categoryTitle);
      if (!cat) return;
      container.innerHTML = cat.items.map(it => itemHTML(it, categoryTitle)).join("");
    }

    function renderAll() {
      document.querySelectorAll(".items[data-category]").forEach(el => {
        const catName = el.getAttribute("data-category");
        renderCategory(catName, el);
      });
    }

    function renderFeatured() {
      const grid = document.getElementById("featuredGrid");
      if (!grid) return;

      const cards = FEATURED.map(f => {
        const it = findItem(f.category, f.name);
        if (!it) return "";
        const priceText = it.price != null ? formatPrice(it.price) : "";
        const img = it.file
          ? `<img src="${IMG_BASE + it.file}" alt="${it.name}" loading="lazy" onerror="this.outerHTML='<div class=&quot;no-img&quot; style=&quot;height:100px;border-radius:0&quot;>Sin foto</div>'">`
          : `<div class="no-img" style="height:100px;border-radius:0">Sin foto</div>`;

        const href = waForItem(it.name, priceText);
        return `
          <a class="feat" href="${href}" target="_blank" rel="noopener" title="Pedir ${it.name}">
            <div class="feat-media">
              ${img}
              <div class="feat-price-badge">${priceText || "Consultar"}</div>
            </div>
            <div class="feat-body">
              <div class="name">${it.name}</div>
              <div class="meta">
                <div class="tag">${f.tag}</div>
              </div>
            </div>
          </a>
        `;
      }).join("");

      grid.innerHTML = cards;
    }

    function setupWhatsAppButtons() {
      const generalMsg = WHATSAPP_PREFIX + "Quiero hacer un pedido. ¿Me ayudas por favor?";
      const href = waLink(generalMsg);
    
      ["waTop", "waHero", "waFloat"].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.href = href;
      });
    }


    function setupSearch() {
      const q = document.getElementById("q");
      const clear = document.getElementById("clear");

      function applyFilter() {
        const term = (q.value || "").trim().toLowerCase();
        const allItems = document.querySelectorAll(".item");
        allItems.forEach(card => {
          const name = card.getAttribute("data-name") || "";
          if (!term || name.includes(term)) card.classList.remove("hide");
          else card.classList.add("hide");
        });

        document.querySelectorAll(".category").forEach(cat => {
          const visible = cat.querySelectorAll(".item:not(.hide)").length;
          if (term && visible === 0) cat.classList.add("hide");
          else cat.classList.remove("hide");
        });

        const hero = document.querySelector(".hero");
        const featured = document.getElementById("destacados");
        if (hero) hero.classList.remove("hide");
        if (featured) featured.classList.remove("hide");
      }

      q.addEventListener("input", applyFilter);
      clear.addEventListener("click", () => {
        q.value = "";
        applyFilter();
        q.focus();
      });
    }

    function getIngredientsFor(itemName){
      // Busca el plato en todas las categorías del array MENU
      const n = (itemName || "").toLowerCase();
      for (const cat of MENU){
        if (!cat.items) continue;
        const it = cat.items.find(x => (x.name || "").toLowerCase() === n);
        if (it && it.ingredients) return it.ingredients;
      }
      return null;
    }

    function setupIngredientsModal(){
      const modal = document.getElementById("ingModal");
      const backdrop = document.getElementById("ingBackdrop");
      const title = document.getElementById("ingTitle");
      const body = document.getElementById("ingBody");
      const closeBtn = document.getElementById("ingClose");
      const waBtn = document.getElementById("ingWa");
      if (!modal || !backdrop || !title || !body || !closeBtn || !waBtn) return;

      const close = () => {
        modal.hidden = true;
        backdrop.hidden = true;
        document.removeEventListener("keydown", onKey);
      };

      const onKey = (e) => {
        if (e.key === "Escape") close();
      };

      const open = (itemName) => {
        const ing = getIngredientsFor(itemName);
        title.textContent = "Ingredientes · " + itemName;

        if (Array.isArray(ing) && ing.length){
          body.textContent = "Ingredientes: " + ing.join(", ") + ".";
        } else if (typeof ing === "string" && ing.trim()){
          body.textContent = "Ingredientes: " + ing.trim();
        } else {
          body.textContent = "Ingredientes no registrados todavía. Si tienes alergias, escríbenos y te confirmamos los ingredientes antes de preparar tu pedido.";
        }

        const msg = WHATSAPP_PREFIX + "¿Me confirmas los ingredientes de: " + itemName + "? Tengo una alergia y quiero asegurarme. Gracias.";
        waBtn.href = waLink(msg);

        modal.hidden = false;
        backdrop.hidden = false;
        document.addEventListener("keydown", onKey);
      };

      backdrop.addEventListener("click", close);
      closeBtn.addEventListener("click", close);

      document.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-ingredients-for]");
        if (!btn) return;
        e.preventDefault();
        const itemName = btn.getAttribute("data-ingredients-for");
        if (itemName) open(itemName);
      });
    }

    function setupCategoriesMenu(){
      const menu = document.getElementById("catMenu");
      const btn  = document.getElementById("catFloat");
      if (!menu || !btn) return;
  
      let backdrop = null;
  
      const setChev = (open) => {
        // Mantiene tu texto original "Categorías ▾" / "Categorías ▴"
        btn.textContent = open ? "Categorías ▴" : "Categorías ▾";
        btn.setAttribute("aria-expanded", open ? "true" : "false");
      };
  
      const openMenu = () => {
        if (!backdrop){
          backdrop = document.createElement("div");
          backdrop.className = "catmenu-backdrop";
          backdrop.addEventListener("click", closeMenu);
          document.body.appendChild(backdrop);
        } else {
          backdrop.classList.remove("hide");
          backdrop.hidden = false;
        }
  
        menu.hidden = false;
        setChev(true);
  
        // Cierra con ESC
        document.addEventListener("keydown", onKey);
  
        // Opcional: enfoca el primer link para accesibilidad
        const firstLink = menu.querySelector("a");
        if (firstLink) firstLink.focus({ preventScroll: true });
      };
  
      const closeMenu = () => {
        menu.hidden = true;
        if (backdrop){
          backdrop.hidden = true;          // lo ocultamos
          backdrop.classList.add("hide");  // y aseguramos display none
        }
        setChev(false);
        document.removeEventListener("keydown", onKey);
      };
  
      const toggleMenu = () => {
        const isOpen = !menu.hidden;
        if (isOpen) closeMenu();
        else openMenu();
      };
  
      const onKey = (e) => {
        if (e.key === "Escape") closeMenu();
      };
  
      // Click en el botón
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        toggleMenu();
      });
  
      // Si haces click en una categoría, que cierre el menú
      menu.addEventListener("click", (e) => {
        const a = e.target.closest("a[href^='#']");
        if (!a) return;
  
        // Cierra primero
        closeMenu();
  
        // Scroll suave y confiable
        const id = a.getAttribute("href").slice(1);
        const target = document.getElementById(id);
        if (target){
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
  
      // Estado inicial accesible
      btn.setAttribute("aria-expanded", "false");
      setChev(false);
    }


    renderAll();
    renderFeatured();
    setupWhatsAppButtons();
    setupCartSelection();
    setupSearch();
    setupIngredientsModal();
    setupCategoriesMenu(); 
  </script>

  <footer class="site-footer">
    <div class="footer-inner">
      <div><strong>Floresta Brava</strong> · Av. Coruña y Guipúzcoa · Quito</div>
      <div class="footer-links">
        <a href="index.html">Inicio</a>
        <a aria-current="page" href="menudigital.html">Menú digital</a>
        <a href="#top">Subir</a>
      </div>
    </div>
  </footer>

  <script>
   
  </script>
</body>
</html>
